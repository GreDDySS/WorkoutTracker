<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="WorkoutTracker.Views.CreateWorkoutPageView"
             Title="CreateWorkoutPageView"
             BackgroundColor="#121212">
    
    <ContentPage.ToolbarItems>
    </ContentPage.ToolbarItems>

    <ContentPage.Resources>
        <DataTemplate x:Key="ExerciseTemplate">
            <Frame BackgroundColor="#2C2C2C" 
                   CornerRadius="10" 
                   Padding="15" 
                   Margin="0, 5, 0, 5"
                   HasShadow="False">
                <Grid ColumnDefinitions="Auto, *, Auto">

                    <Label Grid.Column="0" Text="x1" TextColor="Gray" FontSize="16" VerticalOptions="Start" Margin="0, 0, 10, 0" />

                    <VerticalStackLayout Grid.Column="1" Spacing="3">
                        <Label Text="{Binding ExerciseTime}" TextColor="White" FontSize="16" />
                        <Label Text="{Binding ExerciseName}" TextColor="White" FontSize="18" FontAttributes="Bold" />
                        <Label Text="{Binding RestTime}" TextColor="#00BFFF" FontSize="16" />
                        <Label Text="ОТДЫХ" TextColor="#00BFFF" FontSize="16" />
                    </VerticalStackLayout>

                    <ImageButton Grid.Column="2" Source="dots_vertical.png" HeightRequest="20" WidthRequest="20" BackgroundColor="Transparent" HorizontalOptions="End" VerticalOptions="Start" />
                </Grid>
            </Frame>
        </DataTemplate>
    </ContentPage.Resources>

    <Grid RowDefinitions="*, Auto" Padding="15,0">
        <VerticalStackLayout Grid.Row="0" Spacing="10">
            <Frame BackgroundColor="#2C2C2C" Margin="0, 10, 0, 0" CornerRadius="10">
                <Entry Placeholder="Название Тренировки"
                       PlaceholderColor="Gray"
                       TextColor="White"
                       FontSize="18"
                       HeightRequest="50"
                       Background="Transparent"
                       HorizontalTextAlignment="Center"/>
            </Frame>
            <Button Text="+ Добавить Упражнение" BackgroundColor="#2C2C2C" CornerRadius="10" FontSize="18" FontAttributes="Bold" TextColor="#00BFFF" Padding="15" Margin="0, 10" Command="{Binding AddExerciseCommand}"/>
            <CollectionView x:Name="ExerciseList"
                            ItemTemplate="{StaticResource ExerciseTemplate}"
                            ItemsSource="{Binding Exercise}"
                            IsVisible="{Binding HasExercise}"
                            SelectionMode="None"/>
        </VerticalStackLayout>

        <Button Grid.Row="1" BackgroundColor="White" Text="Сохранить тренировку" TextColor="Black" FontSize="30" Margin="0, 10" Command="{Binding SaveWorkoutCommand}"/>
    </Grid>
</ContentPage>