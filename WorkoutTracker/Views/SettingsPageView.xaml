<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:vm="clr-namespace:WorkoutTracker.ViewModels"
             x:Class="WorkoutTracker.Views.SettingsPageView"
             x:DataType="vm:SettingsViewModel"
             Title="Настройки">

    <ScrollView>
        <VerticalStackLayout Padding="20" Spacing="25">

            <Label Text="Настройки" Style="{StaticResource LabelHero}" FontSize="40" Margin="0,10,0,10"/>

            <VerticalStackLayout Spacing="10">
                <Label Text="ПО УМОЛЧАНИЮ" Style="{StaticResource LabelCaption}" FontAttributes="Bold"/>

                <Border Style="{StaticResource CardStyle}">
                    <VerticalStackLayout Spacing="20">
                        <Grid ColumnDefinitions="*, Auto">
                            <Label Text="Подходы" VerticalOptions="Center" Style="{StaticResource LabelBody}"/>
                            <Border Grid.Column="1" Style="{StaticResource CounterContainer}" WidthRequest="140">
                                <Grid ColumnDefinitions="40, *, 40">
                                    <Button Grid.Column="0" Text="-" Style="{StaticResource ButtonCounter}" Command="{Binding ChangeApproachesCommand}" CommandParameter="-"/>
                                    <Label Grid.Column="1" Text="{Binding DefaultApproaches}" FontSize="18" FontAttributes="Bold" HorizontalOptions="Center" VerticalOptions="Center"/>
                                    <Button Grid.Column="2" Text="+" Style="{StaticResource ButtonCounter}" Command="{Binding ChangeApproachesCommand}" CommandParameter="+"/>
                                </Grid>
                            </Border>
                        </Grid>

                        <BoxView HeightRequest="1" Color="{StaticResource BackgroundInput}"/>

                        <Grid ColumnDefinitions="*, Auto">
                            <Label Text="Время работы" VerticalOptions="Center" Style="{StaticResource LabelBody}"/>
                            <Border Grid.Column="1" Style="{StaticResource CounterContainer}" WidthRequest="140">
                                <Grid ColumnDefinitions="40, *, 40">
                                    <Button Grid.Column="0" Text="-" Style="{StaticResource ButtonCounter}" Command="{Binding ChangeWorkTimeCommand}" CommandParameter="-"/>
                                    <Label Grid.Column="1" Text="{Binding WorkTimeDisplay}" TextColor="{StaticResource AccentWork}" FontSize="18" FontAttributes="Bold" HorizontalOptions="Center" VerticalOptions="Center"/>
                                    <Button Grid.Column="2" Text="+" Style="{StaticResource ButtonCounter}" Command="{Binding ChangeWorkTimeCommand}" CommandParameter="+"/>
                                </Grid>
                            </Border>
                        </Grid>

                        <BoxView HeightRequest="1" Color="{StaticResource BackgroundInput}"/>

                        <Grid ColumnDefinitions="*, Auto">
                            <Label Text="Время отдыха" VerticalOptions="Center" Style="{StaticResource LabelBody}"/>
                            <Border Grid.Column="1" Style="{StaticResource CounterContainer}" WidthRequest="140">
                                <Grid ColumnDefinitions="40, *, 40">
                                    <Button Grid.Column="0" Text="-" Style="{StaticResource ButtonCounter}" Command="{Binding ChangeRestTimeCommand}" CommandParameter="-"/>
                                    <Label Grid.Column="1" Text="{Binding RestTimeDisplay}" TextColor="{StaticResource AccentRest}" FontSize="18" FontAttributes="Bold" HorizontalOptions="Center" VerticalOptions="Center"/>
                                    <Button Grid.Column="2" Text="+" Style="{StaticResource ButtonCounter}" Command="{Binding ChangeRestTimeCommand}" CommandParameter="+"/>
                                </Grid>
                            </Border>
                        </Grid>
                    </VerticalStackLayout>
                </Border>
            </VerticalStackLayout>

            <VerticalStackLayout Spacing="10">
                <Label Text="ТАЙМЕР" Style="{StaticResource LabelCaption}" FontAttributes="Bold"/>

                <Border Style="{StaticResource CardStyle}">
                    <VerticalStackLayout Spacing="20">
                        <Grid ColumnDefinitions="*, Auto">
                            <VerticalStackLayout Spacing="2">
                                <Label Text="Автопереход" Style="{StaticResource LabelBody}"/>
                                <Label Text="Начинать следующее сразу" Style="{StaticResource LabelCaption}"/>
                            </VerticalStackLayout>
                            <Switch Grid.Column="1" IsToggled="{Binding AutoStartNextExercise}" OnColor="{StaticResource AccentMain}"/>
                        </Grid>

                        <BoxView HeightRequest="1" Color="{StaticResource BackgroundInput}"/>

                        <VerticalStackLayout Spacing="10">
                            <Grid ColumnDefinitions="*, Auto">
                                <Label Text="Предупреждение (сек)" Style="{StaticResource LabelBody}" VerticalOptions="Center"/>
                                <Label Grid.Column="1" Text="{Binding CountdownWarningSeconds}" FontAttributes="Bold" TextColor="{StaticResource AccentMain}" FontSize="18"/>
                            </Grid>
                            <Grid ColumnDefinitions="40, *, 40">
                                <Button Grid.Column="0" Text="-" Style="{StaticResource ButtonCounter}" Command="{Binding ChangeWarningCommand}" CommandParameter="-"/>
                                <Slider Grid.Column="1" Minimum="0" Maximum="10" Value="{Binding CountdownWarningSeconds}" 
                                        MinimumTrackColor="{StaticResource AccentMain}" MaximumTrackColor="{StaticResource BackgroundInput}" ThumbColor="White"/>
                                <Button Grid.Column="2" Text="+" Style="{StaticResource ButtonCounter}" Command="{Binding ChangeWarningCommand}" CommandParameter="+"/>
                            </Grid>
                        </VerticalStackLayout>
                    </VerticalStackLayout>
                </Border>
            </VerticalStackLayout>

            <VerticalStackLayout Spacing="10">
                <Label Text="УВЕДОМЛЕНИЯ" Style="{StaticResource LabelCaption}" FontAttributes="Bold"/>

                <Border Style="{StaticResource CardStyle}">
                    <VerticalStackLayout Spacing="20">
                        <Grid ColumnDefinitions="*, Auto">
                            <VerticalStackLayout Spacing="2">
                                <Label Text="Звук" Style="{StaticResource LabelBody}"/>
                                <Label Text="Сигнал при смене фаз" Style="{StaticResource LabelCaption}"/>
                            </VerticalStackLayout>
                            <Switch Grid.Column="1" IsToggled="{Binding SoundEnabled}" OnColor="{StaticResource AccentMain}"/>
                        </Grid>

                        <BoxView HeightRequest="1" Color="{StaticResource BackgroundInput}"/>

                        <Grid ColumnDefinitions="*, Auto">
                            <VerticalStackLayout Spacing="2">
                                <Label Text="Вибрация" Style="{StaticResource LabelBody}"/>
                                <Label Text="Тактильный отклик" Style="{StaticResource LabelCaption}"/>
                            </VerticalStackLayout>
                            <Switch Grid.Column="1" IsToggled="{Binding VibrationEnabled}" OnColor="{StaticResource AccentMain}"/>
                        </Grid>
                    </VerticalStackLayout>
                </Border>
            </VerticalStackLayout>

            <BoxView HeightRequest="50" Color="Transparent"/>
        </VerticalStackLayout>
    </ScrollView>
</ContentPage>